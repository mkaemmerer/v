;(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define(['baconjs', 'virtual-dom'], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory(require('baconjs'), require('virutal-dom'));
  } else {
    root.v = factory(root.Bacon, root.virtualDom);
  }
}(this, function(Bacon, vdom) {
{"version":3,"sources":["v.js"],"names":[],"mappings":"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","file":"v.js","sourcesContent":["/* global vdom, Bacon */\n\nconsole.log(Bacon);\nconst VNode = vdom.VNode;\nconst VText = vdom.VText;\n\nclass Writer {\n  constructor(parent, children = []){\n    this._parent   = parent;\n    this._children = children;\n  }\n  _build(){\n    //FlatMap\n    return this._children\n      .map(c => c._build())\n      .reduce((x,y) => x.concat(y), []);\n  }\n  append(/* w */){\n    //Abstract\n  }\n  open(tagName){\n    return new TagWriter(tagName, this);\n  }\n  text(text){\n    return this.append(new WText(text));\n  }\n  close(){\n    return this._parent.append(this);\n  }\n  $if(condition){\n    return new IfWriter(condition, this);\n  }\n  each(array){\n    const writers = array.map(() => new Writer(this));\n    return new ArrayWriter(writers, this);\n  }\n}\n\nclass WText {\n  constructor(text){\n    this._text = text;\n  }\n  _build(){\n    return [new VText(this._text)];\n  }\n}\nclass TagWriter extends Writer {\n  constructor(tagName, parent, children = []){\n    super(parent, children);\n    this._tagName  = tagName;\n  }\n  _build(){\n    return [new VNode(this._tagName, {}, super._build())];\n  }\n  run(){\n    const vnode = this._build()[0];\n    return vdom.create(vnode);\n  }\n  append(writer){\n    return new TagWriter(this._tagName, this._parent, this._children.concat([writer]));\n  }\n}\n\n// If/Else\nclass ConditionalWriter extends Writer {\n  constructor(condition, parent, children = []){\n    super(parent, children);\n    this._condition = condition;\n  }\n  _build(){\n    return this._condition ? super._build() : [];\n  }\n}\nclass IfWriter extends ConditionalWriter {\n  $else(){\n    return new ElseWriter(!this._condition, this._parent.append(this));\n  }\n  append(writer){\n    return new IfWriter(this._condition, this._parent, this._children.concat([writer]));\n  }\n}\nclass ElseWriter extends ConditionalWriter {\n  append(writer){\n    return new ElseWriter(this._condition, this._parent, this._children.concat([writer]));\n  }\n}\n\n//Each\nclass ArrayWriter extends Writer {\n  constructor(array, parent, children = []){\n    super(parent, children);\n    this._array = array;\n  }\n  _build(){\n    console.log(JSON.stringify(this._children));\n    return transpose(this._children)\n      .reduce((x,y) => x.concat(y), [])\n      .map(c => c._build())\n      .reduce((x,y) => x.concat(y), []);\n  }\n  open(tagName){\n    const array = this._array\n      .map(w => w.open(tagName));\n    return new ArrayWriter(array, this);\n  }\n  text(text){\n    const array = this._array\n      .map(w => w.text(text));\n    return new ArrayWriter(array, this);\n  }\n  append(writer){\n    debugger;\n    return new ArrayWriter(this._array, this._parent, this._children.concat([writer._children]));\n  }\n}\n\nfunction transpose(array){\n  return array;\n}\n\n\n//Export\nconst v = function(){\n  return new TagWriter('div');\n};\n"],"sourceRoot":"/source/"}
return v;
}));
